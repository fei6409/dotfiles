---
- defaults:
    link:
      create: true
      relink: true
    create:
      mode: 0755

- clean: ['~']

- shell:
    - description: Installing submodules
      command: git submodule update --init --recursive
      stdout: true

#### common links
- link:
    # git
    ~/.gitconfig:
    ~/.gitignore.global:
    # oh-my-tmux
    ~/.tmux: modules/tmux
    ~/.tmux.conf: modules/tmux/.tmux.conf
    ~/.tmux.conf.local:
    # vim
    ~/.vimrc:
    # nvim / lua
    ~/.config/nvim/lua:
    ~/.config/nvim/init.lua:
    # zsh / prezto
    ~/.zshrc:
    ~/.zpreztorc:
    ~/.zprofile:
    ~/.zprezto: modules/prezto
    ~/.zlogin: modules/prezto/runcoms/zlogin
    ~/.zlogout: modules/prezto/runcoms/zlogout
    ~/.zshenv: modules/prezto/runcoms/zshenv
    ~/.zprezto/contrib/fast-syntax-highlighting: modules/fast-syntax-highlighting
    # others
    ~/.utils.zsh:
    ~/.alias.zsh:
    ~/.lazy-load.zsh:
    ~/.clang-tidy:
    ~/.shellcheckrc:
    ~/.jjconfig.toml:
    ~/.config/starship.toml:
    ~/.fzf: modules/fzf
    ~/.local/bin/better-git-branch: bin/better-git-branch
    ~/.local/bin/unarchive: bin/unarchive
    # ~/.p10k.zsh:
    # ~/.my-git-prompt.zsh:

#### Linux links
- defaults:
    link:
      if: '[[ `uname` == Linux ]]'
- link:
    # pyenv
    ~/.pyenv: modules/pyenv
    # binaries
    ~/.local/bin/delta: bin/delta
    ~/.local/bin/ssh-forward: bin/ssh-forward
    ~/.local/bin/fd: /usr/bin/fdfind
    ~/.local/bin/bat: /usr/bin/batcat
    # fcitx5 autostart
    ~/.config/autostart/org.fcitx.Fcitx5.desktop:
      path: /usr/share/applications/org.fcitx.Fcitx5.desktop

#### brew for macOS
- shell:
    - description: Updating Homebrew
      command: brew update
    - description: Installing
      command: >-
        brew install
        bat
        colordiff
        coreutils
        duf
        dust
        eza
        fd
        font-meslo-lg-nerd-font
        fzf
        git-absorb
        git-delta
        hyperfine
        luarocks
        neovim
        node
        pyenv
        rbenv ruby-build
        reattach-to-user-namespace
        ripgrep
        sd
        shellcheck
        starship
        zoxide

#### apt for Debian
- shell:
    - description: Updating Apt
      command: sudo apt update
    - description: Installing
      command: >-
        sudo apt install -y
        bat
        colordiff
        du-dust
        duf
        eza
        fcitx5 im-config
        fcitx5-chewing
        fcitx5-mozc
        fcitx5-rime
        fd-find
        git-absorb
        hyperfine
        luarocks
        ninja-build
        nodejs
        npm
        rbenv
        ripgrep
        sd
        shellcheck
        starship
    - description: Installing Zoxide
      command: curl -sSfL https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh | sh
      stdout: true
